# ipuaro: –õ–æ–∫–∞–ª—å–Ω—ã–π AI-–∞–≥–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–æ–≤–æ–π –±–∞–∑–æ–π

## –¶–µ–ª—å

–û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –æ–¥–Ω–∞ —Å–µ—Å—Å–∏—è, —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–¥–æ–≤–æ–π –±–∞–∑–æ–π –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞. –û—â—É—â–µ–Ω–∏–µ ¬´–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ¬ª –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ –ª–µ–Ω–∏–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏ —É–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|------------|
| **–Ø–∑—ã–∫** | TypeScript |
| **Runtime** | Node.js |
| **TUI** | Ink (React –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞) |
| **Storage** | Redis —Å AOF persistence |
| **AST –ø–∞—Ä—Å–∏–Ω–≥** | tree-sitter (js, ts, jsx, tsx, json, yaml) |
| **LLM** | Ollama API (qwen2.5-coder:7b-instruct, 128K –∫–æ–Ω—Ç–µ–∫—Å—Ç) |
| **Git** | simple-git |
| **File watching** | chokidar |
| **CLI** | Commander.js |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | Vitest |
| **–°–±–æ—Ä–∫–∞** | tsup |
| **Gitignore –ø–∞—Ä—Å–∏–Ω–≥** | ignore (npm) |
| **–ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤** | Ollama API |
| **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤** | MD5 |

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

–§–æ–∫—É—Å –Ω–∞ TypeScript/JavaScript —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ:
- TypeScript (.ts, .tsx)
- JavaScript (.js, .jsx)
- JSON, YAML –∫–æ–Ω—Ñ–∏–≥–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ cli/                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, CLI –ø–∞—Ä—Å–∏–Ω–≥
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ tui/                    # –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx             # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (Ink)
‚îÇ   ‚îú‚îÄ‚îÄ components/         # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Chat.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StatusBar.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DiffView.tsx    # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (inline highlights)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConfirmDialog.tsx # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Input.tsx
‚îÇ   ‚îî‚îÄ‚îÄ hooks/              # React hooks
‚îú‚îÄ‚îÄ core/                   # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ orchestrator.ts     # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ context.ts          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (–ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ undo.ts             # –°—Ç–µ–∫ –æ—Ç–º–µ–Ω—ã (5-10 –∏–∑–º–µ–Ω–µ–Ω–∏–π)
‚îÇ   ‚îî‚îÄ‚îÄ session.ts          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–µ–π
‚îú‚îÄ‚îÄ llm/                    # –†–∞–±–æ—Ç–∞ —Å –º–æ–¥–µ–ª—å—é
‚îÇ   ‚îú‚îÄ‚îÄ client.ts           # Ollama –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ tools.ts            # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—É–ª–æ–≤ (18 —à—Ç—É–∫)
‚îÇ   ‚îú‚îÄ‚îÄ prompts.ts          # –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ parser.ts           # –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ indexer/                # –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ scanner.ts          # –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ parser.ts           # AST –ø–∞—Ä—Å–∏–Ω–≥ (tree-sitter)
‚îÇ   ‚îú‚îÄ‚îÄ analyzer.ts         # –ê–Ω–∞–ª–∏–∑ —Å–≤—è–∑–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ watcher.ts          # Watchdog (chokidar)
‚îú‚îÄ‚îÄ redis/                  # –†–∞–±–æ—Ç–∞ —Å Redis
‚îÇ   ‚îú‚îÄ‚îÄ client.ts           # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ + AOF config
‚îÇ   ‚îú‚îÄ‚îÄ schema.ts           # –¢–∏–ø—ã –∫–ª—é—á–µ–π (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø—É)
‚îÇ   ‚îî‚îÄ‚îÄ queries.ts          # –ó–∞–ø—Ä–æ—Å—ã
‚îú‚îÄ‚îÄ tools/                  # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç—É–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ read.ts             # get_lines, get_function
‚îÇ   ‚îú‚îÄ‚îÄ search.ts           # find_references, find_definition
‚îÇ   ‚îú‚îÄ‚îÄ edit.ts             # edit_lines, create_file
‚îÇ   ‚îú‚îÄ‚îÄ git.ts              # git_status, git_diff, git_commit
‚îÇ   ‚îú‚îÄ‚îÄ run.ts              # run_command, run_tests
‚îÇ   ‚îî‚îÄ‚îÄ index.ts            # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ç—É–ª–æ–≤
‚îú‚îÄ‚îÄ security/               # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ blacklist.ts        # Blacklist –æ–ø–∞—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ whitelist.ts        # Whitelist —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îî‚îÄ‚îÄ validator.ts        # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚îú‚îÄ‚îÄ types/                  # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ ast.ts
‚îÇ   ‚îú‚îÄ‚îÄ redis.ts
‚îÇ   ‚îú‚îÄ‚îÄ tools.ts
‚îÇ   ‚îî‚îÄ‚îÄ session.ts
‚îî‚îÄ‚îÄ utils/                  # –£—Ç–∏–ª–∏—Ç—ã
    ‚îú‚îÄ‚îÄ hash.ts
    ‚îî‚îÄ‚îÄ tokens.ts           # –ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤

tests/
‚îú‚îÄ‚îÄ unit/
‚îú‚îÄ‚îÄ integration/
‚îî‚îÄ‚îÄ fixtures/

config/
‚îú‚îÄ‚îÄ default.json            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
‚îú‚îÄ‚îÄ blacklist.json          # Blacklist –∫–æ–º–∞–Ω–¥
‚îî‚îÄ‚îÄ whitelist.json          # Whitelist –∫–æ–º–∞–Ω–¥ (—Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π)
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     TUI (Ink/React)                          ‚îÇ
‚îÇ                     Chat —Ä–µ–∂–∏–º                               ‚îÇ
‚îÇ  - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–∏–ª–∏ auto-apply —Ä–µ–∂–∏–º)           ‚îÇ
‚îÇ  - diff —Å inline highlights                                  ‚îÇ
‚îÇ  - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: —Ç–æ–∫–µ–Ω—ã, –≤—Ä–µ–º—è, –≤—ã–∑–≤–∞–Ω–Ω—ã–µ tools               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä                             ‚îÇ
‚îÇ  - –Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + AST (–±–µ–∑ –∫–æ–¥–∞)           ‚îÇ
‚îÇ  - –∫–æ–¥ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ tools –ø–æ –∑–∞–ø—Ä–æ—Å—É –º–æ–¥–µ–ª–∏           ‚îÇ
‚îÇ  - user choice –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (retry/skip/abort)               ‚îÇ
‚îÇ  - –∞–≤—Ç–æ-—Å–∂–∞—Ç–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ >80%                           ‚îÇ
‚îÇ  - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ                 ‚îÇ
            ‚ñº                 ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   qwen2.5-coder   ‚îÇ ‚îÇ              Redis + AOF               ‚îÇ
‚îÇ   7B, 128K ctx    ‚îÇ ‚îÇ                                       ‚îÇ
‚îÇ                   ‚îÇ ‚îÇ  - –∫–æ–¥ —Ñ–∞–π–ª–æ–≤ (lines)                 ‚îÇ
‚îÇ   - –æ—Å–Ω–æ–≤–Ω–∞—è      ‚îÇ ‚îÇ  - AST —Å—Ç—Ä—É–∫—Ç—É—Ä—ã                      ‚îÇ
‚îÇ   - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥   ‚îÇ ‚îÇ  - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –∏–Ω–¥–µ–∫—Å—ã               ‚îÇ
‚îÇ   - —Ä–µ–≤—å—é         ‚îÇ ‚îÇ  - —Å–µ—Å—Å–∏–∏ (–±–µ—Å—Å—Ä–æ—á–Ω–æ)                 ‚îÇ
‚îÇ   - tools         ‚îÇ ‚îÇ                                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

| –ü—Ä–∏–Ω—Ü–∏–ø | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|---------|------------|
| **–û–¥–Ω–∞ –º–æ–¥–µ–ª—å** | qwen2.5-coder:7b-instruct –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á |
| **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–∞** | –ö–æ–¥ –ù–ï –≤ –Ω–∞—á–∞–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ. –ú–æ–¥–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ tools |
| **User choice** | –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: retry/skip/abort |
| **–ö–æ–¥ –≤ Redis** | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ I/O |
| **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ auto-apply |
| **Undo stack** | –ò—Å—Ç–æ—Ä–∏—è 5-10 –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –æ—Ç–∫–∞—Ç–∞ |
| **–ë–µ–∑ –ª–∏–º–∏—Ç–æ–≤** | –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ —Ä–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ñ–∞–π–ª–æ–≤ |
| **–Ø–∑—ã–∫ –ø—Ä–æ–º–ø—Ç–æ–≤** | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –Ω–∞ EN, –æ—Ç–≤–µ—Ç—ã –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –∫ —è–∑—ã–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| **–ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** | –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤–µ—Å—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π |
| **Tool format** | XML –≤ –ø—Ä–æ–º–ø—Ç–µ (–∫–∞–∫ Claude Code: `<tool_call>`) |
| **Encoding** | –¢–æ–ª—å–∫–æ UTF-8, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è |
| **Symlinks** | –•—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–∏–º—è, target) |

---

## Redis: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–Ω—Ü–∏–ø: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø—É

–í–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –º–µ–ª–∫–∏—Ö –∫–ª—é—á–µ–π ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–æ–ª—å—à–∏—Ö JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä:

```
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –ü–†–û–ï–ö–¢ (5 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–ª—é—á–µ–π)
# –ò–º—è –ø—Ä–æ–µ–∫—Ç–∞: {parent-folder}-{project-folder}
# –ü—Ä–∏–º–µ—Ä: projects-myapp
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

project:{name}:files         # Hash: path ‚Üí {lines[], hash, size, lastModified}
project:{name}:ast           # Hash: path ‚Üí {imports[], exports[], functions[], classes[], parseError?}
project:{name}:meta          # Hash: path ‚Üí {complexity, deps, dependents, isHub, isEntry}
project:{name}:indexes       # Hash: symbols, deps_graph, call_graph
project:{name}:config        # Hash: settings, whitelist, last_indexed

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –°–ï–°–°–ò–ò (–±–µ—Å—Å—Ä–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

session:{id}:data            # Hash: history[], context, created_at, last_activity, stats
session:{id}:undo            # List: —Å—Ç–µ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –æ—Ç–º–µ–Ω—ã (5-10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
sessions:list                # List: –≤—Å–µ session_id –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
```

### –ò—Ç–æ–≥–æ –∫–ª—é—á–µ–π

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–ª—é—á–µ–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| –ü—Ä–æ–µ–∫—Ç | 5 | files, ast, meta, indexes, config |
| –°–µ—Å—Å–∏—è | 3 –Ω–∞ —Å–µ—Å—Å–∏—é | data + undo + –æ–±—â–∏–π list |
| **–í—Å–µ–≥–æ** | ~10-20 | –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ |

### –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ project:{name}:files

```json
{
  "src/auth/login.ts": {
    "lines": ["import jwt from 'jsonwebtoken'", "import { User } from '../models'", "..."],
    "hash": "a3f2b1c...",
    "size": 2431,
    "lastModified": 1705312200
  }
}
```

### –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ project:{name}:ast

```json
{
  "src/auth/login.ts": {
    "imports": [
      {"name": "jwt", "from": "jsonwebtoken", "line": 1, "type": "external"},
      {"name": "User", "from": "../models", "line": 2, "type": "internal"}
    ],
    "exports": [
      {"name": "AuthManager", "type": "class", "line": 10},
      {"name": "refreshToken", "type": "function", "line": 55}
    ],
    "functions": [
      {"name": "refreshToken", "lineStart": 55, "lineEnd": 70, "params": ["token"], "isAsync": true}
    ],
    "classes": [
      {
        "name": "AuthManager",
        "lineStart": 10,
        "lineEnd": 52,
        "methods": [
          {"name": "login", "lineStart": 15, "lineEnd": 30, "params": ["username", "password"]},
          {"name": "validateToken", "lineStart": 32, "lineEnd": 50, "params": ["token"]}
        ]
      }
    ],
    "parseError": false
  }
}
```

### Redis –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (AOF)

```conf
# redis.conf
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb
```

---

## –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

### –ü–µ—Ä–≤–∏—á–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

```
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:

0. –ü–†–û–í–ï–†–ö–ê –†–ê–ó–ú–ï–†–ê
   ‚îî‚Üí –ï—Å–ª–∏ >10K —Ñ–∞–π–ª–æ–≤ ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
   ‚îî‚Üí –°–ø—Ä–æ—Å–∏—Ç—å: –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å / –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é / –æ—Ç–º–µ–Ω–∞

1. –°–ö–ê–ù–ò–†–û–í–ê–ù–ò–ï (—Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º)
   ‚îî‚Üí [=====>    ] 45% (120/267 files)
   ‚îî‚Üí –û–±—Ö–æ–¥ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–µ–∫—Ç–∞
   ‚îî‚Üí –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: .gitignore, node_modules, dist, etc
   ‚îî‚Üí TypeScript/JavaScript —Ñ–∞–π–ª—ã + JSON/YAML
   ‚îî‚Üí –¢–æ–ª—å–∫–æ UTF-8 —Ñ–∞–π–ª—ã (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è)

2. –ü–ê–†–°–ò–ù–ì (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞, –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Ä–∞–∑–º–µ—Ä–∞)
   ‚îî‚Üí –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ ‚Üí lines[] ‚Üí Redis (project:{name}:files)
   ‚îî‚Üí –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ tree-sitter ‚Üí Redis (project:{name}:ast)
   ‚îî‚Üí –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ ‚Üí parseError: true –≤ AST
   ‚îî‚Üí –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ ‚Üí Redis (project:{name}:meta)

3. –ü–û–°–¢–†–û–ï–ù–ò–ï –ò–ù–î–ï–ö–°–û–í
   ‚îî‚Üí –ì—Ä–∞—Ñ –∏–º–ø–æ—Ä—Ç–æ–≤ –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏
   ‚îî‚Üí –ò–Ω–¥–µ–∫—Å —Å–∏–º–≤–æ–ª–æ–≤ (—Ñ—É–Ω–∫—Ü–∏–∏, –∫–ª–∞—Å—Å—ã)
   ‚îî‚Üí Redis (project:{name}:indexes)
```

### Watchdog (chokidar)

```
–§–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. chokidar.watch() –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
2. Debounce: 500ms (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –±—ã—Å—Ç—Ä—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)
3. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞:
   ‚îî‚Üí –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å MD5 hash
   ‚îî‚Üí –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è:
      ‚îî‚Üí –¢–∏—Ö–æ –æ–±–Ω–æ–≤–∏—Ç—å lines –≤ Redis
      ‚îî‚Üí –ü–µ—Ä–µ–ø–∞—Ä—Å–∏—Ç—å AST —á–µ—Ä–µ–∑ tree-sitter
      ‚îî‚Üí –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
4. –ú–æ–¥–µ–ª—å –ø–æ–ª—É—á–∏—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ —á–µ—Ä–µ–∑ tools

–ë–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã (.png, .pdf, etc):
   ‚îî‚Üí –ò–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–∏–º—è, —Ä–∞–∑–º–µ—Ä, —Ç–∏–ø)
   ‚îî‚Üí –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è
```

---

## Tools –º–æ–¥–µ–ª–∏ (18 —à—Ç—É–∫)

### Core Tools ‚Äî –ß—Ç–µ–Ω–∏–µ

| Tool | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|------|----------|-----------|
| `get_lines` | –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ | `path`, `start?`, `end?` |
| `get_function` | –ü–æ–ª—É—á–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ –∏–º–µ–Ω–∏ | `path`, `name` |
| `get_class` | –ü–æ–ª—É—á–∏—Ç—å –∫–ª–∞—Å—Å –ø–æ –∏–º–µ–Ω–∏ | `path`, `name` |

### Core Tools ‚Äî –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–ª–∏ auto-apply)

| Tool | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|------|----------|-----------|
| `edit_lines` | –ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ | `path`, `start`, `end`, `content` |
| `create_file` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª | `path`, `content` |
| `delete_file` | –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª | `path` |

### Core Tools ‚Äî –ü–æ–∏—Å–∫ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

| Tool | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|------|----------|-----------|
| `find_references` | –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º–≤–æ–ª | `symbol` |
| `find_definition` | –ì–¥–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω —Å–∏–º–≤–æ–ª | `symbol` |
| `get_structure` | –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ | `path?` |

### Core Tools ‚Äî –ê–Ω–∞–ª–∏–∑

| Tool | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|------|----------|-----------|
| `get_dependencies` | –û—Ç —á–µ–≥–æ –∑–∞–≤–∏—Å–∏—Ç —Ñ–∞–π–ª | `path` |
| `get_dependents` | –ß—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–∞–π–ª–∞ | `path` |
| `get_complexity` | –ú–µ—Ç—Ä–∏–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ | `path?` |
| `get_todos` | TODO/FIXME –≤ –ø—Ä–æ–µ–∫—Ç–µ | `path?` |

### Core Tools ‚Äî Git –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

| Tool | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|------|----------|-----------|
| `git_status` | –°—Ç–∞—Ç—É—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è | ‚Äî |
| `git_diff` | –ù–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è | `path?` |
| `git_commit` | –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π | `message`, `files?` |
| `run_command` | Shell –∫–æ–º–∞–Ω–¥–∞ (whitelist) | `command` |
| `run_tests` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã | `path?`, `filter?` |

### –ò—Ç–æ–≥–æ: 18 tools

–ú–æ–¥–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ AST –≤ –Ω–∞—á–∞–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ, –∞ –∫–æ–¥ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ tools –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Blacklist –æ–ø–∞—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

```json
{
  "blacklist": [
    "rm -rf",
    "rm -r",
    "git push --force",
    "git reset --hard",
    "git clean -fd",
    "npm publish",
    "sudo",
    "chmod",
    "chown"
  ]
}
```

### Whitelist –∫–æ–º–∞–Ω–¥ –¥–ª—è run_command

```json
{
  "default": [
    "npm", "pnpm", "yarn",
    "git",
    "node", "npx", "tsx",
    "vitest", "jest",
    "tsc", "eslint", "prettier"
  ],
  "user": []
}
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å whitelist —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥:

```json
{
  "whitelist": {
    "user": ["bun", "deno", "cargo"]
  }
}
```

### –õ–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```typescript
async function runCommand(command: string): Promise<ToolResult> {
  const [cmd, ...args] = command.split(' ')

  // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ blacklist ‚Äî –±–µ–∑—É—Å–ª–æ–≤–Ω—ã–π –æ—Ç–∫–∞–∑
  if (isBlacklisted(command)) {
    return { success: false, error: `–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–∞: ${command}` }
  }

  // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ whitelist (default + user)
  if (!isWhitelisted(cmd)) {
    // 3. –°–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
    const confirmed = await askUserConfirmation(
      `–ö–æ–º–∞–Ω–¥–∞ '${cmd}' –Ω–µ –≤ whitelist. –í—ã–ø–æ–ª–Ω–∏—Ç—å?`
    )
    if (!confirmed) {
      return { success: false, error: `–ö–æ–º–∞–Ω–¥–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º` }
    }
  }

  // 4. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
  return execute(command)
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ tools

```typescript
function validatePath(path: string): boolean {
  // –ó–∞–ø—Ä–µ—Ç path traversal
  if (path.includes('..')) return false
  // –¢–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞
  if (!path.startsWith(projectRoot)) return false
  return true
}
```

---

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

### –ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Å—Å–∏–∏)

```
–§–ò–ö–°–ò–†–û–í–ê–ù–ù–ê–Ø –ß–ê–°–¢–¨:
‚îú‚îÄ‚îÄ –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å —Ä–æ–ª—å—é –∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
‚îú‚îÄ‚îÄ –°–ø–∏—Å–æ–∫ tools —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
‚îî‚îÄ‚îÄ –í–°–Å –∏–∑ Redis –ö–†–û–ú–ï –∫–æ–¥–∞:
    ‚îú‚îÄ‚îÄ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–ø–∞–ø–∫–∏, —Ñ–∞–π–ª—ã)
    ‚îú‚îÄ‚îÄ AST –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (imports, exports, —Ñ—É–Ω–∫—Ü–∏–∏, –∫–ª–∞—Å—Å—ã ‚Äî –ë–ï–ó —Ç–µ–ª)
    ‚îú‚îÄ‚îÄ –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏
    ‚îî‚îÄ‚îÄ –ú–µ—Ç—Ä–∏–∫–∏ (complexity, hubs, entry points)

–ö–û–î –ù–ï –í–ö–õ–Æ–ß–ê–ï–¢–°–Ø ‚Äî –º–æ–¥–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ tools –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```

### –ë—é–¥–∂–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤ (128K –æ–∫–Ω–æ)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–æ–∫–µ–Ω—ã | % |
|-----------|--------|---|
| –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç | ~2,000 | 1.5% |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ + AST meta | ~10,000 | 8% |
| **–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã** | ~116,000 | 90% |

### –ê–≤—Ç–æ-—Å–∂–∞—Ç–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

```
–ü—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ >80%:

1. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–∂–∞—Ç–∏–µ:
   ‚îî‚Üí LLM —Å—É–º–º–∞—Ä–∏–∑–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   ‚îî‚Üí –£–¥–∞–ª—è—é—Ç—Å—è tool results (–∫–æ–¥ –∏–∑ get_lines, etc.)
   ‚îî‚Üí –û—Å—Ç–∞—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏–∞–ª–æ–≥–∞

2. –£–¥–∞–ª–∏—Ç—å –∫–æ–¥ —Ñ–∞–π–ª–æ–≤ –Ω–µ —É–ø–æ–º—è–Ω—É—Ç—ã—Ö 5+ —Å–æ–æ–±—â–µ–Ω–∏–π
   ‚îî‚Üí –ú–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ tools

3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: —Ç–æ–ª—å–∫–æ –≤ status bar (ctx% –º–µ–Ω—è–µ—Ç—Å—è)
   ‚îî‚Üí –ù–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

---

## Error Handling

### –ü—Ä–∏–Ω—Ü–∏–ø: User Choice

```typescript
interface ErrorResult {
  type: 'redis' | 'parse' | 'llm' | 'file' | 'command' | 'conflict'
  message: string
  recoverable: boolean
}

interface UserChoice {
  retry: boolean
  skip: boolean
  abort: boolean
}

async function handleError(error: ErrorResult): Promise<UserChoice> {
  // 1. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å (–ª–æ–∫–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
  stats.recordError(error)

  // 2. –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
  ui.showError(`‚ùå ${error.type}: ${error.message}`)

  // 3. –î–∞—Ç—å –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–í–°–ï–ì–î–ê)
  return ui.askChoice({
    message: '–ß—Ç–æ –¥–µ–ª–∞—Ç—å?',
    options: [
      { key: 'r', label: 'Retry ‚Äî –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞' },
      { key: 's', label: 'Skip ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å' },
      { key: 'a', label: 'Abort ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å' }
    ]
  })
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```typescript
async function handleEditConflict(
  path: string,
  expectedHash: string,
  currentHash: string
): Promise<ConflictChoice> {
  ui.showWarning(`‚ö†Ô∏è –§–∞–π–ª ${path} –±—ã–ª –∏–∑–º–µ–Ω—ë–Ω –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏`)

  return ui.askChoice({
    message: '–§–∞–π–ª –∏–∑–º–µ–Ω–∏–ª—Å—è. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?',
    options: [
      { key: 'a', label: 'Apply ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø–æ–≤–µ—Ä—Ö –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏' },
      { key: 's', label: 'Skip ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ' },
      { key: 'r', label: 'Regenerate ‚Äî –ø–æ–ø—Ä–æ—Å–∏—Ç—å –º–æ–¥–µ–ª—å –∑–∞–Ω–æ–≤–æ' }
    ]
  })
}
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã

| –û—à–∏–±–∫–∞ | –í–∞—Ä–∏–∞–Ω—Ç—ã |
|--------|----------|
| Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | Retry / Abort |
| AST –ø–∞—Ä—Å–∏–Ω–≥ —É–ø–∞–ª | Skip —Ñ–∞–π–ª (–ø–æ–º–µ—Ç–∏—Ç—å parseError) / Abort |
| LLM timeout | Retry / Skip –∑–∞–ø—Ä–æ—Å / Abort |
| –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω | Skip / Abort |
| –ö–æ–º–∞–Ω–¥–∞ –Ω–µ –≤ whitelist | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å / Skip / Abort |
| –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | Apply / Skip / Regenerate |

---

## TUI –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–∫—Ä–∞–Ω–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [ipuaro]  [ctx: 12%]  [project: projects-myapp]  [47m]  ‚úì  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  User: –æ–±—ä—è—Å–Ω–∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è                     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  Agent: [get_function src/auth/login.ts login]              ‚îÇ
‚îÇ         –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ JWT...                     ‚îÇ
‚îÇ         ‚è± 3.2s ‚îÇ 1,247 tokens ‚îÇ 1 tool call                 ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  User: –æ—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏—é validateToken                    ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  Agent: –ü—Ä–µ–¥–ª–∞–≥–∞—é —Å–ª–µ–¥—É—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:                      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ src/auth/login.ts (—Å—Ç—Ä–æ–∫–∏ 32-50) ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ
‚îÇ  ‚îÇ  const isValid = jwt.verify(token)     ‚îÇ                ‚îÇ
‚îÇ  ‚îÇ  const isValid = this.verifyToken()    ‚îÇ  ‚Üê –∏–∑–º–µ–Ω–µ–Ω–æ    ‚îÇ
‚îÇ  ‚îÇ  if (!isValid) throw new AuthError()   ‚îÇ  ‚Üê –¥–æ–±–∞–≤–ª–µ–Ω–æ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  –ò–∑–º–µ–Ω–µ–Ω–∏—è: –≤—ã–¥–µ–ª–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é, –¥–æ–±–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É expiry      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ
‚îÇ  ‚îÇ  [Y] –ü—Ä–∏–º–µ–Ω–∏—Ç—å  [N] –û—Ç–º–µ–Ω–∏—Ç—å  [E] Edit ‚îÇ                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
‚îÇ                                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ > _                                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–æ–º–∞–Ω–¥—ã (7 —à—Ç—É–∫)

| –ö–æ–º–∞–Ω–¥–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `/help` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É |
| `/clear` | –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ |
| `/undo` | –û—Ç–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ (—Å—Ç–µ–∫ 5-10) |
| `/sessions` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ (list, load, delete) |
| `/status` | –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (Redis, –∫–æ–Ω—Ç–µ–∫—Å—Ç, –º–æ–¥–µ–ª—å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞) |
| `/reindex` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ |
| `/eval` | –°–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–∏ –Ω–∞ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ (LLM –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤–æ–π –æ—Ç–≤–µ—Ç) |

**–í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî —á–µ—Ä–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫ –≤ —á–∞—Ç–µ.**

–ü—Ä–∏–º–µ—Ä—ã:
- "–ø–æ–∫–∞–∂–∏ –≤—Å–µ TODO" ‚Üí –º–æ–¥–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç `get_todos`
- "–Ω–∞–π–¥–∏ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AuthManager" ‚Üí –º–æ–¥–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç `find_references`
- "–∑–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã –¥–ª—è auth" ‚Üí –º–æ–¥–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç `run_tests`

### –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã

**–¢–æ–ª—å–∫–æ Chat.** –û–¥–∏–Ω —Ä–µ–∂–∏–º –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á:
- –ö–æ–¥-—Ä–µ–≤—å—é
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–¥—É
- Git –æ–ø–µ—Ä–∞—Ü–∏–∏

### –†–µ–∂–∏–º Auto-Apply

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```typescript
// –í –∫–æ–Ω—Ñ–∏–≥–µ –∏–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É
{
  "edit": {
    "autoApply": false  // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–∫–ª—é—á–µ–Ω
  }
}

// –í–∫–ª—é—á–∏—Ç—å –Ω–∞ —Å–µ—Å—Å–∏—é
> /auto-apply on

// –ü—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
// –ù–æ –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ /undo
```

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–∞

| –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| `ctx: 12%` | –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ |
| `project: projects-myapp` | –¢–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç (parent-folder) |
| `main` | –¢–µ–∫—É—â–∞—è git branch |
| `47m` | –í—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ |
| `‚úì` / `‚ü≥` / `‚úó` | ready / thinking / error |

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–≤–µ—Ç–∞

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –º–æ–¥–µ–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
- ‚è± –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
- üîß –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–≤–∞–Ω–Ω—ã—Ö tools

### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

| –ö–ª–∞–≤–∏—à–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `Ctrl+C` | –ü—Ä–µ—Ä–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é (1-–π —Ä–∞–∑), –≤—ã—Ö–æ–¥ (2-–π —Ä–∞–∑) |
| `Ctrl+D` | –í—ã—Ö–æ–¥ —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–µ—Å—Å–∏–∏ |
| `Ctrl+Z` | Undo (= /undo) |
| `‚Üë/‚Üì` | –ò—Å—Ç–æ—Ä–∏—è –≤–≤–æ–¥–∞ |
| `Tab` | –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—É—Ç–µ–π |

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü—Ä–∏ –∫–∞–∂–¥–æ–º edit_lines, create_file, delete_file (–µ—Å–ª–∏ –Ω–µ auto-apply):

1. **Diff —Å inline highlights** ‚Äî –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
2. **Syntax highlighting** ‚Äî –ø–æ–ª–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –≤ diff
3. **–û–ø–∏—Å–∞–Ω–∏–µ** ‚Äî –∫—Ä–∞—Ç–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —á—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è
4. **–î–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏** ‚Äî wrap –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (—Ö—Ä–∞–Ω—è—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é)
5. **–í—ã–±–æ—Ä**:
   - `[Y]` ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ
   - `[N]` ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å
   - `[E]` ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –∫–æ–¥

---

## TypeScript —Ç–∏–ø—ã

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞

```typescript
interface FileData {
  lines: string[]
  hash: string
  size: number
  lastModified: number
}

interface FileAST {
  imports: ImportInfo[]
  exports: ExportInfo[]
  functions: FunctionInfo[]
  classes: ClassInfo[]
  parseError: boolean  // true –µ—Å–ª–∏ tree-sitter –Ω–µ —Å–º–æ–≥ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å
}

interface FileMeta {
  complexity: ComplexityScore  // –ü—Ä–æ—Å—Ç–æ–π —Å–∫–æ—Ä: LOC + –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å + imports
  dependencies: string[]
  dependents: string[]
  isHub: boolean              // –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ: >5 dependents –ò–õ–ò —á–∞—Å—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è
  isEntryPoint: boolean       // –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ: index.ts/main.ts –ò–õ–ò 0 dependents
}

interface ComplexityScore {
  loc: number           // Lines of code
  nesting: number       // –ú–∞–∫—Å. –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å
  imports: number       // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ imports
  score: number         // –û–±—â–∏–π —Å–∫–æ—Ä
}
```

### AST —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```typescript
interface ImportInfo {
  name: string
  from: string
  line: number
  type: 'internal' | 'external' | 'builtin'
  isDefault: boolean
}

interface ExportInfo {
  name: string
  type: 'function' | 'class' | 'interface' | 'type' | 'const'
  line: number
}

interface FunctionInfo {
  name: string
  lineStart: number
  lineEnd: number
  params: string[]
  returnType?: string
  isAsync: boolean
  isExported: boolean
}

interface ClassInfo {
  name: string
  lineStart: number
  lineEnd: number
  methods: MethodInfo[]
  properties: PropertyInfo[]
  extends?: string
  implements: string[]
  isExported: boolean
}

interface MethodInfo {
  name: string
  lineStart: number
  lineEnd: number
  params: string[]
  visibility: 'public' | 'private' | 'protected'
  isStatic: boolean
  isAsync: boolean
}

interface PropertyInfo {
  name: string
  line: number
  type?: string
  visibility: 'public' | 'private' | 'protected'
  isStatic: boolean
  isReadonly: boolean
}
```

### –°–µ—Å—Å–∏—è

```typescript
interface Session {
  id: string
  projectName: string  // —Ñ–æ—Ä–º–∞—Ç: parent-folder
  createdAt: number
  lastActivityAt: number
  history: ChatMessage[]
  context: ContextState
  undoStack: UndoEntry[]
  stats: SessionStats
  inputHistory: string[]  // –ò—Å—Ç–æ—Ä–∏—è –≤–≤–æ–¥–∞ –¥–ª—è ‚Üë/‚Üì (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Redis)
}

interface SessionStats {
  totalTokens: number
  totalTime: number
  toolCalls: number
  editsApplied: number
  editsRejected: number
}

interface ChatMessage {
  role: 'user' | 'assistant' | 'tool'
  content: string
  timestamp: number
  toolCalls?: ToolCall[]
  toolResults?: ToolResult[]
  stats?: MessageStats
}

interface MessageStats {
  tokens: number
  timeMs: number
  toolCalls: number
}

interface ContextState {
  loadedFiles: string[]      // –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
  tokensUsed: number
  tokensLimit: number        // 128000
}

interface UndoEntry {
  id: string
  timestamp: number
  filePath: string
  previousContent: string[]
  newContent: string[]
  description: string
}
```

### Tools

```typescript
interface ToolDefinition {
  name: string
  description: string
  parameters: ToolParameter[]
  handler: (params: Record<string, unknown>) => Promise<ToolResult>
  requiresConfirmation: boolean  // true –¥–ª—è edit/create/delete (–µ—Å–ª–∏ –Ω–µ auto-apply)
}

interface ToolParameter {
  name: string
  type: 'string' | 'number' | 'boolean'
  description: string
  required: boolean
  default?: unknown
}

interface ToolCall {
  id: string
  name: string
  parameters: Record<string, unknown>
}

interface ToolResult {
  callId: string
  success: boolean
  data?: unknown
  error?: string
}
```

### Error Handling

```typescript
interface ErrorResult {
  type: 'redis' | 'parse' | 'llm' | 'file' | 'command' | 'conflict'
  message: string
  recoverable: boolean
  suggestion?: string
}

type UserErrorChoice = 'retry' | 'skip' | 'abort'
type ConflictChoice = 'apply' | 'skip' | 'regenerate'
```

---

## –§–ª–æ—É —Ä–∞–±–æ—Ç—ã

### –û–±—â–∏–π —Ñ–ª–æ—É

```
0. ONBOARDING (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
   ‚îî‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ‚Üí –µ—Å–ª–∏ –Ω–µ—Ç, –æ—à–∏–±–∫–∞ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π
   ‚îî‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ Ollama: –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å ‚Üí –µ—Å–ª–∏ –Ω–µ—Ç, –æ—à–∏–±–∫–∞ –∏ –≤—ã—Ö–æ–¥
   ‚îî‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–∏: qwen2.5-coder:7b-instruct ‚Üí –µ—Å–ª–∏ –Ω–µ—Ç, –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–∫–∞—á–∞—Ç—å

1. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
   ‚îî‚Üí –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
   ‚îî‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Redis
   ‚îî‚Üí –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –ø–µ—Ä–≤–∏—á–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (tree-sitter)
   ‚îî‚Üí –ó–∞–ø—É—Å–∫ watchdog (chokidar, debounce 500ms)
   ‚îî‚Üí –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ—Å—Å–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π

2. –ó–ê–ü–†–û–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
   ‚îî‚Üí –î–æ–±–∞–≤–∏—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é
   ‚îî‚Üí –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç:
      - –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
      - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ + AST (–±–µ–∑ –∫–æ–¥–∞!)
      - –ò—Å—Ç–æ—Ä–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π)
   ‚îî‚Üí –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –º–æ–¥–µ–ª—å
   ‚îî‚Üí –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä [‚ü≥ thinking...]

3. –û–ë–†–ê–ë–û–¢–ö–ê –û–¢–í–ï–¢–ê (–∂–¥—ë–º –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç)
   ‚îî‚Üí –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ tool calls –ø–æ –º–µ—Ä–µ –ø–æ–ª—É—á–µ–Ω–∏—è
   ‚îî‚Üí –ï—Å–ª–∏ tool call (—á—Ç–µ–Ω–∏–µ):
      ‚îî‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
      ‚îî‚Üí –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
      ‚îî‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–æ–¥–µ–ª—å
   ‚îî‚Üí –ï—Å–ª–∏ tool call (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ):
      ‚îî‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç (hash –∏–∑–º–µ–Ω–∏–ª—Å—è?)
      ‚îî‚Üí –ï—Å–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç ‚Üí —Å–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      ‚îî‚Üí –ü–æ–∫–∞–∑–∞—Ç—å diff —Å inline highlights + –æ–ø–∏—Å–∞–Ω–∏–µ
      ‚îî‚Üí –ï—Å–ª–∏ auto-apply ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
      ‚îî‚Üí –ò–Ω–∞—á–µ ‚Üí –°–ü–†–û–°–ò–¢–¨ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (Y/N/E)
      ‚îî‚Üí –ï—Å–ª–∏ Y:
         ‚îî‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ undo stack
         ‚îî‚Üí –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
         ‚îî‚Üí –û–±–Ω–æ–≤–∏—Ç—å Redis (lines, AST)
   ‚îî‚Üí –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: –≤—Ä–µ–º—è, —Ç–æ–∫–µ–Ω—ã, tools
   ‚îî‚Üí –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

4. –û–®–ò–ë–ö–ê ‚Üí User Choice (–≤—Å–µ–≥–¥–∞)
   ‚îî‚Üí –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
   ‚îî‚Üí –°–ø—Ä–æ—Å–∏—Ç—å: Retry / Skip / Abort
   ‚îî‚Üí –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

5. –ü–û–í–¢–û–†–ò–¢–¨ —Å —à–∞–≥–∞ 2
```

### –§–ª–æ—É –∫–æ–¥-—Ä–µ–≤—å—é (—á–µ—Ä–µ–∑ —á–∞—Ç)

```
User: "—Å–¥–µ–ª–∞–π —Ä–µ–≤—å—é src/auth/login.ts"

Agent:
1. get_lines(src/auth/login.ts) ‚Üí –ø–æ–ª—É—á–∏—Ç—å –∫–æ–¥
2. get_dependencies(src/auth/login.ts) ‚Üí –ø–æ–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
3. get_todos(src/auth/login.ts) ‚Üí –Ω–∞–π—Ç–∏ TODO
4. –ê–Ω–∞–ª–∏–∑:
   - –ë–∞–≥–∏ –∏ edge cases
   - –°—Ç–∏–ª—å –∫–æ–¥–∞
   - Security issues
   - Performance issues
5. –í—ã–≤–æ–¥: —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ—á–∞–Ω–∏–π —Å –Ω–æ–º–µ—Ä–∞–º–∏ —Å—Ç—Ä–æ–∫
6. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: ‚è± 5.2s ‚îÇ 2,847 tokens ‚îÇ 3 tool calls
```

### –§–ª–æ—É —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—á–µ—Ä–µ–∑ —á–∞—Ç)

```
User: "–æ—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏—é validateToken"

Agent:
1. find_definition(validateToken) ‚Üí –Ω–∞–π—Ç–∏ –≥–¥–µ
2. get_function(path, validateToken) ‚Üí –ø–æ–ª—É—á–∏—Ç—å –∫–æ–¥
3. find_references(validateToken) ‚Üí –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
4. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è –ª–∏ —Ñ–∞–π–ª
6. –ü–æ–∫–∞–∑–∞—Ç—å diff —Å inline highlights + –æ–ø–∏—Å–∞–Ω–∏–µ
7. –°–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ [Y/N/E] (–∏–ª–∏ auto-apply)
8. –ï—Å–ª–∏ Y: edit_lines(...) ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å
9. –î–æ–±–∞–≤–∏—Ç—å –≤ undo stack
10. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–≤–µ—Ç–∞
```

### –§–ª–æ—É –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ (—á–µ—Ä–µ–∑ —á–∞—Ç)

```
User: "–Ω–∞–ø–∏—à–∏ —Ç–µ—Å—Ç—ã –¥–ª—è AuthManager.login"

Agent:
1. get_class(src/auth/login.ts, AuthManager) ‚Üí –ø–æ–ª—É—á–∏—Ç—å –∫–ª–∞—Å—Å
2. get_dependencies(src/auth/login.ts) ‚Üí —á—Ç–æ –º–æ–∫–∞—Ç—å
3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤:
   - Happy path
   - Edge cases
   - Error cases
4. –ü–æ–∫–∞–∑–∞—Ç—å diff –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞
5. –°–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ [Y/N/E]
6. –ï—Å–ª–∏ Y: create_file(tests/auth/login.test.ts, content)
7. run_tests(tests/auth/login.test.ts) ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
```

---

## –ß—Ç–æ –ù–ï –¥–µ–ª–∞–µ–º

| –û—Ç–≤–µ—Ä–≥–Ω—É—Ç–æ | –ü—Ä–∏—á–∏–Ω–∞ |
|------------|---------|
| RAG —Å –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î | –û–≤–µ—Ä–∫–∏–ª–ª, tree-sitter + Redis –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ |
| –í—Ç–æ—Ä–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ä–µ–≤—å—é | Overhead, –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è |
| TypeScript Compiler API | tree-sitter –ª–µ–≥—á–µ –∏ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–µ–µ |
| Regex –ø–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É | –ú–æ–¥–µ–ª—å —Å–∞–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω—É–∂–Ω—ã–π –∫–æ–¥ —á–µ—Ä–µ–∑ tools |
| Understanding —á–µ—Ä–µ–∑ LLM | –ú–æ–¥–µ–ª—å –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–¥ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ tools |
| –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã | –û–¥–∏–Ω Chat —Ä–µ–∂–∏–º –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—ë |
| –°–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Redis | –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø—É –ø—Ä–æ—â–µ |
| Python/Go/Rust –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | –§–æ–∫—É—Å –Ω–∞ TypeScript/JS |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ | User choice –Ω–∞–¥—ë–∂–Ω–µ–µ |
| –°—Ç—Ä–∏–º–∏–Ω–≥ –ø–æ —Ç–æ–∫–µ–Ω–∞–º | –ñ–¥—ë–º –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| –í–Ω–µ—à–Ω–∏–µ API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ | –¢–æ–ª—å–∫–æ TUI, –º–æ–Ω–æ–ª–∏—Ç |
| –ü–ª–∞–≥–∏–Ω—ã/—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è | –í—Å—ë –≤—Å—Ç—Ä–æ–µ–Ω–æ |
| –§–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏ | –¢–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö | –ü—Ä–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ ‚Äî /reindex |

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### config/default.json

```json
{
  "redis": {
    "host": "localhost",
    "port": 6379,
    "db": 0
  },
  "llm": {
    "provider": "ollama",
    "model": "qwen2.5-coder:7b-instruct",
    "contextWindow": 128000,
    "temperature": 0.1,
    "systemPromptLanguage": "en"
  },
  "project": {
    "scope": "repository",
    "ignorePatterns": [
      "node_modules",
      "dist",
      "build",
      ".git",
      "*.min.js"
    ],
    "binaryExtensions": [".png", ".jpg", ".pdf", ".zip", ".woff"]
  },
  "session": {
    "persistIndefinitely": true,
    "maxHistoryMessages": 100,
    "saveInputHistory": true
  },
  "context": {
    "systemPromptTokens": 2000,
    "maxContextUsage": 0.8,
    "autoCompressAt": 0.8,
    "compressionMethod": "llm-summary"
  },
  "watchdog": {
    "debounceMs": 500
  },
  "commands": {
    "timeout": null
  },
  "undo": {
    "stackSize": 10
  },
  "edit": {
    "alwaysConfirm": true,
    "autoApply": false,
    "showDiff": true,
    "diffFormat": "inline-highlights",
    "syntaxHighlight": true,
    "showDescription": true,
    "wrapLongLines": true
  },
  "display": {
    "showStats": true,
    "showToolCalls": true,
    "theme": "dark",
    "bellOnComplete": true,
    "progressBar": true
  },
  "autocomplete": {
    "source": "redis-index"
  },
  "input": {
    "multiline": "auto"
  },
  "llm": {
    "toolFormat": "xml",
    "autoRetry": false,
    "cache": false
  },
  "limits": {
    "maxFilesWarning": 10000,
    "encoding": "utf-8"
  }
}
```

### config/blacklist.json

```json
{
  "commands": [
    "rm -rf",
    "rm -r",
    "git push --force",
    "git reset --hard",
    "git clean -fd",
    "npm publish",
    "sudo",
    "chmod",
    "chown"
  ]
}
```

### config/whitelist.json

```json
{
  "default": [
    "npm",
    "pnpm",
    "yarn",
    "git",
    "node",
    "npx",
    "tsx",
    "vitest",
    "jest",
    "tsc",
    "eslint",
    "prettier"
  ],
  "user": [],
  "askForUnknown": true
}
```

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª—å |
|---------|------|
| –í—Ä–µ–º—è –ø–µ—Ä–≤–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ |
| –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –º–æ–¥–µ–ª–∏ | –°—Ç—Ä–∏–º–∏–Ω–≥, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ Redis | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–æ–µ–∫—Ç–∞ |
| –¢–æ—á–Ω–æ—Å—Ç—å AST –ø–∞—Ä—Å–∏–Ω–≥–∞ (tree-sitter) | > 99% –¥–ª—è TypeScript |
| –í—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ watchdog | < 1 —Å–µ–∫—É–Ω–¥–∞ |
| –õ–æ–∫–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –¢–æ–∫–µ–Ω—ã, –≤—Ä–µ–º—è, tools –∑–∞ —Å–µ—Å—Å–∏—é |
